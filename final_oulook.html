<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI Fashion Stylist â€“ Demo</title>
  <style>
    :root {
      --bg:#0b0f19; --panel:#121827; --muted:#9aa4af; --text:#e5e7eb; --accent:#7c5cff;
      --card:#0e1424; --good:#19c37d; --warn:#ffcc00;
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto; background:linear-gradient(180deg,#0b0f19 0%,#0a0e18 60%,#0b1120 100%); color:var(--text)}
    .wrap{max-width:1100px; margin:32px auto; padding:0 16px}
    header{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:18px}
    .title{font-weight:800; font-size:clamp(20px,3vw,28px)}
    .pill{background:rgba(124,92,255,.14); color:#cfc4ff; border:1px solid rgba(124,92,255,.35); padding:6px 10px; border-radius:999px; font-size:12px}
    .grid{display:grid; grid-template-columns:1.1fr .9fr; gap:18px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.08); border-radius:16px; box-shadow:0 10px 25px rgba(0,0,0,.35)}
    .card h3{margin:0 0 10px 0; font-size:18px}
    .card .body{padding:16px}
    .row{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
    input[type=file]{background:var(--panel); border:1px dashed rgba(255,255,255,.2); padding:10px; border-radius:12px; width:100%; color:var(--muted)}
    input[type=text], select {width:100%; padding:10px 12px; border-radius:10px; background:#0b1223; border:1px solid rgba(255,255,255,.12); color:var(--text)}
    .hint{font-size:12px; color:var(--muted)}
    .btn{appearance:none; border:none; cursor:pointer; padding:10px 14px; border-radius:12px; font-weight:700; color:white; background:linear-gradient(90deg,#7c5cff,#6d8cff); box-shadow:0 6px 18px rgba(108,92,255,.35)}
    .btn.gray{background:#1a2336; color:#d7dce5; box-shadow:none; border:1px solid rgba(255,255,255,.12)}
    .tags{display:flex; gap:8px; flex-wrap:wrap}
    .tag{font-size:12px; padding:6px 10px; border-radius:999px; background:#11182b; border:1px solid rgba(255,255,255,.1); color:#cbd5e1}
    .cols{display:grid; grid-template-columns:1fr 1fr; gap:10px}
    .suggest h4{margin:6px 0 6px; font-size:14px; color:#cbd5e1}
    canvas{width:100%; height:auto; border-radius:14px; display:block; background:#0a0f1e; border:1px solid rgba(255,255,255,.08)}
    .footer{margin-top:14px; display:flex; gap:10px; flex-wrap:wrap}
    .note{font-size:12px; color:var(--muted)}
    .sep{height:1px; background:rgba(255,255,255,.08); margin:10px 0}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="title">AI Fashion Stylist <span class="pill">Prototype (frontendâ€‘only)</span></div>
      <button class="btn gray" id="resetBtn" title="Clear inputs">Reset</button>
    </header>

    <div class="grid">
      <!-- Left: Inputs -->
      <section class="card">
        <div class="body">
          <h3>1) Upload outfit photo</h3>
          <input id="file" type="file" accept="image/*" />
          <div class="hint">Tip: a clear, frontâ€‘facing picture works best. This demo runs locally in your browser.</div>

          <div class="sep"></div>

          <h3>2) Describe the outfit (helps the rules)</h3>
          <input id="description" type="text" placeholder="e.g., 'jeans and tâ€‘shirt', 'red dress', 'saree', 'formal shirt and trousers'" />

          <div class="sep"></div>

          <div class="row">
            <button class="btn" id="analyzeBtn">Analyze & Recommend</button>
            <button class="btn gray" id="demoBtn" title="Autofill a sample">Use Sample</button>
          </div>
        </div>
      </section>

      <!-- Right: Suggestions -->
      <section class="card suggest">
        <div class="body">
          <h3>Recommendations</h3>
          <div id="recoWrap">
            <div class="hint">Run analysis to see jewelry, makeup and hairstyle suggestions here.</div>
          </div>
        </div>
      </section>
    </div>

    <!-- Preview / Styled Output -->
    <section class="card" style="margin-top:18px">
      <div class="body">
        <h3>Styled Preview (mock)</h3>
        <canvas id="preview" width="1024" height="640"></canvas>
        <div class="footer">
          <button class="btn" id="renderBtn">Generate Styled Preview</button>
          <button class="btn gray" id="saveBtn">Save Image</button>
          <span class="note">This preview simulates the final AI image by overlaying icons and labels (no server or AI required).</span>
        </div>
      </div>
    </section>
  </div>

  <script>
    // --- State ---
    const state = {
      img: null,
      imgEl: new Image(),
      suggestions: { jewelry: [], makeup: [], hairstyle: [] },
    };

    const fileInput = document.getElementById('file');
    const descInput = document.getElementById('description');
    const analyzeBtn = document.getElementById('analyzeBtn');
    const demoBtn = document.getElementById('demoBtn');
    const resetBtn = document.getElementById('resetBtn');
    const renderBtn = document.getElementById('renderBtn');
    const saveBtn = document.getElementById('saveBtn');
    const recoWrap = document.getElementById('recoWrap');
    const canvas = document.getElementById('preview');
    const ctx = canvas.getContext('2d');

    // Utility: fit image in canvas
    function drawImageCover(img, ctx, canvas) {
      const iw = img.width, ih = img.height, cw = canvas.width, ch = canvas.height;
      const scale = Math.max(cw/iw, ch/ih);
      const x = (cw - iw*scale)/2; const y = (ch - ih*scale)/2;
      ctx.drawImage(img, x, y, iw*scale, ih*scale);
    }

    // Simple rule-based recommender
    function recommend(outfit=""){
      outfit = outfit.toLowerCase();
      const res = { jewelry: [], makeup: [], hairstyle: [] };

      const has = (s)=>outfit.includes(s);

      if (has('jeans') && (has('t-shirt')||has('tshirt')||has('tee'))) {
        res.jewelry = ['Hoop Earrings', 'Silver Chain Necklace', 'Casual Watch'];
        res.makeup = ['Nude Lipstick', 'Light Eyeliner', 'Natural Base'];
        res.hairstyle = ['Wavy Hair', 'Messy Bun', 'High Ponytail'];
      } else if (has('dress')) {
        res.jewelry = ['Dangling Earrings', 'Pearl Necklace', 'Bracelet'];
        res.makeup = ['Red Lipstick', 'Smokey Eyeshadow', 'Soft Blush'];
        res.hairstyle = ['Soft Curls', 'Straight Hair', 'Halfâ€‘up Style'];
      } else if (has('saree') || has('lehenga')) {
        res.jewelry = ['Gold Jhumkas', 'Bangles', 'Choker Necklace'];
        res.makeup = ['Bold Kajal', 'Matte Lipstick', 'Highlighter'];
        res.hairstyle = ['Classic Braid', 'Low Bun with Flowers'];
      } else if (has('formal') || has('shirt') || has('trousers') ) {
        res.jewelry = ['Stud Earrings', 'Minimal Chain', 'Elegant Watch'];
        res.makeup = ['Light Foundation', 'Glossy Lipstick', 'Mascara'];
        res.hairstyle = ['Sleek Straight', 'Low Ponytail'];
      } else {
        res.jewelry = ['Stud Earrings', 'Pendant Necklace'];
        res.makeup = ['Natural Look', 'Lip Gloss'];
        res.hairstyle = ['Open Hair', 'Casual Ponytail'];
      }
      return res;
    }

    function renderSuggestions(sug){
      const block = (title, items)=>`
        <div>
          <h4>${title}</h4>
          <div class="tags">${items.map(i=>`<span class="tag">${i}</span>`).join('')}</div>
        </div>`
      ;
      recoWrap.innerHTML = `
        ${block('Jewelry', sug.jewelry)}
        ${block('Makeup', sug.makeup)}
        ${block('Hairstyle', sug.hairstyle)}
      `;
    }

    // Mock styled preview: overlay icons and labels on the uploaded image
    function drawPreview(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      if (state.imgEl && state.imgEl.complete) {
        drawImageCover(state.imgEl, ctx, canvas);
      } else {
        ctx.fillStyle = '#0a0f1e'; ctx.fillRect(0,0,canvas.width,canvas.height);
      }

      // Overlay a translucent gradient for polish
      const grd = ctx.createLinearGradient(0,0,0,canvas.height);
      grd.addColorStop(0,'rgba(0,0,0,0)');
      grd.addColorStop(1,'rgba(0,0,0,.35)');
      ctx.fillStyle = grd; ctx.fillRect(0,0,canvas.width,canvas.height);

      // Place simple emoji icons as placeholders for accessories/makeup
      ctx.font = '28px system-ui';
      ctx.fillStyle = 'white';
      const icons = {
        'Hoop Earrings':'ðŸ’Ž', 'Dangling Earrings':'ðŸ’Ž', 'Stud Earrings':'ðŸ’Ž', 'Gold Jhumkas':'ðŸ’Ž',
        'Silver Chain Necklace':'ðŸ“¿','Pearl Necklace':'ðŸ“¿','Choker Necklace':'ðŸ“¿','Pendant Necklace':'ðŸ“¿',
        'Casual Watch':'âŒš','Elegant Watch':'âŒš'
      };

      // Draw jewelry icons in corners
      const jew = state.suggestions.jewelry || [];
      jew.slice(0,3).forEach((item,idx)=>{
        const icon = icons[item] || 'âœ¨';
        const x = 24 + idx*40, y = 42;
        ctx.fillText(icon, x, y);
      });

      // Draw caption with makeup & hairstyle at bottom
      const caption = `Makeup: ${state.suggestions.makeup.join(', ')}  |  Hair: ${state.suggestions.hairstyle.join(', ')}`;
      ctx.font = '16px system-ui';
      const pad = 12; const boxW = Math.min(canvas.width-24, ctx.measureText(caption).width + 24);
      const boxH = 34; const boxX = 12; const boxY = canvas.height - boxH - 12;
      ctx.fillStyle = 'rgba(0,0,0,.55)'; ctx.fillRect(boxX, boxY, boxW, boxH);
      ctx.strokeStyle = 'rgba(255,255,255,.2)'; ctx.strokeRect(boxX, boxY, boxW, boxH);
      ctx.fillStyle = '#e5e7eb'; ctx.fillText(caption, boxX + pad, boxY + 22);
    }

    // Handlers
    fileInput.addEventListener('change', (e)=>{
      const f = e.target.files?.[0];
      if (!f) return;
      const url = URL.createObjectURL(f);
      state.imgEl.onload = ()=>{ drawPreview(); };
      state.imgEl.src = url;
    });

    analyzeBtn.addEventListener('click', ()=>{
      const text = descInput.value.trim();
      state.suggestions = recommend(text);
      renderSuggestions(state.suggestions);
      drawPreview();
    });

    demoBtn.addEventListener('click', ()=>{
      descInput.value = 'jeans and t-shirt';
      state.suggestions = recommend(descInput.value);
      renderSuggestions(state.suggestions);
      drawPreview();
    });

    resetBtn.addEventListener('click', ()=>{
      fileInput.value = '';
      descInput.value = '';
      recoWrap.innerHTML = '<div class="hint">Run analysis to see jewelry, makeup and hairstyle suggestions here.</div>';
      state.imgEl = new Image();
      state.suggestions = { jewelry: [], makeup: [], hairstyle: [] };
      ctx.clearRect(0,0,canvas.width,canvas.height);
      drawPreview();
    });

    renderBtn.addEventListener('click', drawPreview);

    saveBtn.addEventListener('click', ()=>{
      const link = document.createElement('a');
      link.download = 'styled_preview.png';
      link.href = canvas.toDataURL('image/png');
      link.click();
    });

    // Initial paint
    drawPreview();
  </script>
</body>
</html>
